patches:
{% if DRYDOCK_NEWRELIC_LICENSE_KEY %}
- target:
    kind: Deployment
    name: lms
  path: plugins/drydock/k8s/newrelic.yml
{% endif -%}
{% if DRYDOCK_POD_LIFECYCLE -%}
- path: plugins/drydock/k8s/lifecycle/lms.yml
- path: plugins/drydock/k8s/lifecycle/cms.yml
{% endif -%}
- target:
    kind: Job
    labelSelector: app.kubernetes.io/component=job
  path: plugins/drydock/k8s/patches/tutor-jobs.yml
# Patch the sync waves
- path: plugins/drydock/k8s/sync-waves/lms.yml
- path: plugins/drydock/k8s/sync-waves/cms.yml
- path: plugins/drydock/k8s/sync-waves/cms-worker.yml
- path: plugins/drydock/k8s/sync-waves/lms-worker.yml
- path: plugins/drydock/k8s/sync-waves/forum.yml
- target:
    kind: HorizontalPodAutoscaler
  path: plugins/drydock/k8s/patches/sync-wave-100.yml
{% if DRYDOCK_ENABLE_CELERY_TUNING %}
- path: plugins/drydock/k8s/celery/cms-worker.yml
- path: plugins/drydock/k8s/celery/lms-worker.yml
{% endif -%}
{% if FORUM_USERNAME is defined and FORUM_PASSWORD is defined %}
- path: plugins/drydock/k8s/patches/forum.yml
{% endif -%}
